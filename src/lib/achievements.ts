// ============================================================
// VEREDILLAS FM ‚Äî Achievement System (50+ Badges)
// ============================================================

export interface AchievementProgress {
  current: number;
  max: number;
  unit: string;        // e.g. 'min', 'h', 'episodios', 'd√≠as', 'comentarios'
  formatValue?: (n: number) => string; // optional display formatter
}

export interface Achievement {
  id: string;
  name: string;
  description: string;
  icon: string;         // Emoji icon
  rarity: 'common' | 'uncommon' | 'rare' | 'epic' | 'legendary';
  category: 'escucha' | 'social' | 'exploracion' | 'coleccion' | 'especial' | 'fidelidad' | 'madrugador' | 'coleccionista' | 'maraton';
  check: (stats: AchievementStats) => boolean;
  /** If defined, the UI will render a progress bar for this achievement. */
  progress?: (stats: AchievementStats) => AchievementProgress;
  secret?: boolean;
  points: number;
}

export interface AchievementStats {
  listeningTime: number;           // seconds
  favoritesCount: number;
  playbackHistoryCount: number;    // total episodes ever played
  completedEpisodesCount: number;  // episodes listened to ‚â• 80%
  consecutiveEpisodes: number;     // max episodes listened back-to-back (same session)
  commentsCount: number;           // total comments posted
  likedClipsCount: number;
  newsletterSubscribed: boolean;
  // Derived
  daysSinceJoin: number;
  favoritedSeasonsCount: number;   // distinct seasons favorited
  totalSeasonsCount: number;
  loginStreakDays: number;         // current consecutive login days
  maxStreakDays: number;           // all-time record
  hasProfilePicture: boolean;
  hasBio: boolean;
  joinedYear: number;
  peakListeningHour: number;       // 0-23, for night-owl badge
  episodesListenedThisWeek: number;
  chatMessagesCount: number;
  unlockedCardsCount: number;      // cromos
  totalCardsCount: number;         // total available cromos
  differentGuestsListenedCount: number;
  bioLength: number;
  /** Sum of points from already-unlocked achievements ‚Äî computed server-side before evaluating meta-achievements. */
  totalPoints: number;
}

// Rarity colours for UI display
export const RARITY_COLORS: Record<Achievement['rarity'], string> = {
  common:    '#9ca3af',
  uncommon:  '#4ade80',
  rare:      '#60a5fa',
  epic:      '#a855f7',
  legendary: '#f59e0b',
};

export const RARITY_LABELS: Record<Achievement['rarity'], string> = {
  common:    'Com√∫n',
  uncommon:  'Poco com√∫n',
  rare:      'Raro',
  epic:      '√âpico',
  legendary: 'Legendario',
};

export const CATEGORY_LABELS: Record<Achievement['category'], string> = {
  escucha:    'üéß Escucha',
  social:     'üí¨ Social',
  exploracion:'üó∫Ô∏è Exploraci√≥n',
  coleccion:  '‚ù§Ô∏è Colecci√≥n',
  especial:   '‚ú® Especial',
  fidelidad:  'üî• Fidelidad',
  madrugador: 'üåô Madrugador',
  coleccionista: 'üÉè Coleccionista',
  maraton:    'üèÉ Maratonista',
};

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// ACHIEVEMENT DEFINITIONS (50+)
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
export const ACHIEVEMENTS: Achievement[] = [

  // ‚îÄ‚îÄ‚îÄ ESCUCHA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  {
    id: 'primer_minuto',
    name: 'Primer Minuto',
    description: 'Escucha tu primer episodio por al menos 1 minuto.',
    icon: '‚ñ∂Ô∏è',
    rarity: 'common',
    category: 'escucha',
    points: 10,
    check: s => s.listeningTime >= 60,
    progress: s => ({ current: Math.min(s.listeningTime, 60), max: 60, unit: 's' }),
  },
  {
    id: 'primer_fan',
    name: 'Primer Fan',
    description: 'Completa tu primer episodio entero.',
    icon: 'üå±',
    rarity: 'common',
    category: 'escucha',
    points: 15,
    check: s => s.completedEpisodesCount >= 1,
    progress: s => ({ current: Math.min(s.completedEpisodesCount, 1), max: 1, unit: 'episodio' }),
  },
  {
    id: 'media_hora',
    name: 'Media Hora de Podcast',
    description: 'Acumula 30 minutos de escucha total.',
    icon: '‚è±Ô∏è',
    rarity: 'common',
    category: 'escucha',
    points: 20,
    check: s => s.listeningTime >= 1800,
    progress: s => ({ current: Math.min(Math.floor(s.listeningTime / 60), 30), max: 30, unit: 'min' }),
  },
  {
    id: 'oyente_casual',
    name: 'Oyente Casual',
    description: 'Acumula 1 hora de escucha total.',
    icon: 'üéß',
    rarity: 'common',
    category: 'escucha',
    points: 30,
    check: s => s.listeningTime >= 3600,
    progress: s => ({ current: Math.min(Math.floor(s.listeningTime / 60), 60), max: 60, unit: 'min' }),
  },
  {
    id: 'tres_horas',
    name: 'Adicto a la Escucha',
    description: 'Acumula 3 horas de escucha total.',
    icon: 'üîä',
    rarity: 'uncommon',
    category: 'escucha',
    points: 60,
    check: s => s.listeningTime >= 10800,
    progress: s => ({ current: Math.min(parseFloat((s.listeningTime / 3600).toFixed(1)), 3), max: 3, unit: 'h' }),
  },
  {
    id: 'cinco_episodios',
    name: 'Cinco de Cinco',
    description: 'Completa 5 episodios al 100%.',
    icon: '5Ô∏è‚É£',
    rarity: 'uncommon',
    category: 'escucha',
    points: 55,
    check: s => s.completedEpisodesCount >= 5,
    progress: s => ({ current: Math.min(s.completedEpisodesCount, 5), max: 5, unit: 'episodios' }),
  },
  {
    id: 'diez_horas',
    name: 'D√©cada de Horas',
    description: 'Acumula 10 horas de escucha total.',
    icon: 'üîü',
    rarity: 'rare',
    category: 'escucha',
    points: 100,
    check: s => s.listeningTime >= 36000,
    progress: s => ({ current: Math.min(parseFloat((s.listeningTime / 3600).toFixed(1)), 10), max: 10, unit: 'h' }),
  },
  {
    id: 'veinte_episodios',
    name: 'Enganchado',
    description: 'Completa 20 episodios al 100%.',
    icon: 'üîó',
    rarity: 'rare',
    category: 'escucha',
    points: 120,
    check: s => s.completedEpisodesCount >= 20,
    progress: s => ({ current: Math.min(s.completedEpisodesCount, 20), max: 20, unit: 'episodios' }),
  },
  {
    id: 'veinticinco_horas',
    name: 'Un D√≠a Entero',
    description: 'Acumula 25 horas de escucha total.',
    icon: 'üåÖ',
    rarity: 'epic',
    category: 'escucha',
    points: 200,
    check: s => s.listeningTime >= 90000,
    progress: s => ({ current: Math.min(parseFloat((s.listeningTime / 3600).toFixed(1)), 25), max: 25, unit: 'h' }),
  },
  {
    id: 'cincuenta_episodios',
    name: 'Cincuent√≥n',
    description: 'Completa 50 episodios al 100%.',
    icon: 'üèÜ',
    rarity: 'epic',
    category: 'escucha',
    points: 250,
    check: s => s.completedEpisodesCount >= 50,
    progress: s => ({ current: Math.min(s.completedEpisodesCount, 50), max: 50, unit: 'episodios' }),
  },
  {
    id: 'cien_horas',
    name: 'Centuri√≥n del Podcast',
    description: 'Acumula 100 horas de escucha total.',
    icon: 'üíØ',
    rarity: 'legendary',
    category: 'escucha',
    points: 500,
    check: s => s.listeningTime >= 360000,
    progress: s => ({ current: Math.min(parseFloat((s.listeningTime / 3600).toFixed(1)), 100), max: 100, unit: 'h' }),
  },

  // ‚îÄ‚îÄ‚îÄ FIDELIDAD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  {
    id: 'primera_semana',
    name: 'Primera Semana',
    description: 'Lleva 7 d√≠as siendo miembro de Veredillas FM.',
    icon: 'üìÖ',
    rarity: 'common',
    category: 'fidelidad',
    points: 20,
    check: s => s.daysSinceJoin >= 7,
    progress: s => ({ current: Math.min(s.daysSinceJoin, 7), max: 7, unit: 'd√≠as' }),
  },
  {
    id: 'primer_mes',
    name: 'Miembro del Mes',
    description: 'Lleva 30 d√≠as siendo miembro de Veredillas FM.',
    icon: 'üóìÔ∏è',
    rarity: 'uncommon',
    category: 'fidelidad',
    points: 50,
    check: s => s.daysSinceJoin >= 30,
    progress: s => ({ current: Math.min(s.daysSinceJoin, 30), max: 30, unit: 'd√≠as' }),
  },
  {
    id: 'tres_meses',
    name: 'Fan Trimestral',
    description: 'Lleva 90 d√≠as siendo miembro de Veredillas FM.',
    icon: 'üåø',
    rarity: 'rare',
    category: 'fidelidad',
    points: 100,
    check: s => s.daysSinceJoin >= 90,
    progress: s => ({ current: Math.min(s.daysSinceJoin, 90), max: 90, unit: 'd√≠as' }),
  },
  {
    id: 'seis_meses',
    name: 'Semestre de Podcast',
    description: 'Lleva 180 d√≠as siendo miembro de Veredillas FM.',
    icon: 'üå≥',
    rarity: 'epic',
    category: 'fidelidad',
    points: 200,
    check: s => s.daysSinceJoin >= 180,
    progress: s => ({ current: Math.min(s.daysSinceJoin, 180), max: 180, unit: 'd√≠as' }),
  },
  {
    id: 'un_ano',
    name: 'Fan Anual',
    description: 'Lleva 365 d√≠as siendo miembro de Veredillas FM.',
    icon: 'üéÇ',
    rarity: 'legendary',
    category: 'fidelidad',
    points: 400,
    check: s => s.daysSinceJoin >= 365,
    progress: s => ({ current: Math.min(s.daysSinceJoin, 365), max: 365, unit: 'd√≠as' }),
  },
  {
    id: 'racha_semanal',
    name: 'Racha Semanal',
    description: 'Con√©ctate durante 7 d√≠as seguidos.',
    icon: 'üî•',
    rarity: 'uncommon',
    category: 'fidelidad',
    points: 60,
    check: s => s.loginStreakDays >= 7,
    progress: s => ({ current: Math.min(s.loginStreakDays, 7), max: 7, unit: 'd√≠as seguidos' }),
  },
  {
    id: 'racha_mensual',
    name: 'Imparable Diarios',
    description: 'Con√©ctate durante 30 d√≠as seguidos.',
    icon: 'üíé',
    rarity: 'epic',
    category: 'fidelidad',
    points: 250,
    check: s => s.loginStreakDays >= 30,
    progress: s => ({ current: Math.min(s.loginStreakDays, 30), max: 30, unit: 'd√≠as seguidos' }),
  },
  {
    id: 'racha_oro',
    name: 'Racha de Oro',
    description: 'Consigue tu mejor marca personal de 50 d√≠as seguidos.',
    icon: 'üèÜ',
    rarity: 'legendary',
    category: 'fidelidad',
    points: 1000,
    check: s => s.maxStreakDays >= 50,
    progress: s => ({ current: Math.min(s.maxStreakDays, 50), max: 50, unit: 'd√≠as (r√©cord)' }),
    secret: true,
  },
  {
    id: 'og_member',
    name: 'Miembro OG',
    description: 'Te uniste a Veredillas FM en 2026.',
    icon: 'üëë',
    rarity: 'legendary',
    category: 'fidelidad',
    points: 300,
    check: s => s.joinedYear <= 2026,
    secret: true,
  },

  // ‚îÄ‚îÄ‚îÄ SOCIAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  {
    id: 'primer_comentario',
    name: 'La Voz del Oyente',
    description: 'Publica tu primer comentario en un episodio.',
    icon: 'üí¨',
    rarity: 'common',
    category: 'social',
    points: 15,
    check: s => s.commentsCount >= 1,
    progress: s => ({ current: Math.min(s.commentsCount, 1), max: 1, unit: 'comentario' }),
  },
  {
    id: 'comentarista_activo',
    name: 'Comentarista Activo',
    description: 'Publica 10 comentarios en episodios.',
    icon: 'üó£Ô∏è',
    rarity: 'uncommon',
    category: 'social',
    points: 70,
    check: s => s.commentsCount >= 10,
    progress: s => ({ current: Math.min(s.commentsCount, 10), max: 10, unit: 'comentarios' }),
  },
  {
    id: 'comentarista_pro',
    name: 'Comentarista Pro',
    description: 'Publica 25 comentarios en episodios.',
    icon: 'üìù',
    rarity: 'rare',
    category: 'social',
    points: 120,
    check: s => s.commentsCount >= 25,
    progress: s => ({ current: Math.min(s.commentsCount, 25), max: 25, unit: 'comentarios' }),
  },
  {
    id: 'comentarista_leyenda',
    name: 'Cronista del Podcast',
    description: 'Publica 50 comentarios en episodios.',
    icon: 'üì∞',
    rarity: 'epic',
    category: 'social',
    points: 300,
    check: s => s.commentsCount >= 50,
    progress: s => ({ current: Math.min(s.commentsCount, 50), max: 50, unit: 'comentarios' }),
  },
  {
    id: 'primer_chat',
    name: 'Hola Mundo',
    description: 'Env√≠a tu primer mensaje en el chat en vivo.',
    icon: 'üëã',
    rarity: 'common',
    category: 'social',
    points: 10,
    check: s => s.chatMessagesCount >= 1,
  },
  {
    id: 'cien_mensajes_chat',
    name: 'Chateador Empedernido',
    description: 'Env√≠a 100 mensajes en el chat en vivo.',
    icon: 'üåä',
    rarity: 'rare',
    category: 'social',
    points: 110,
    check: s => s.chatMessagesCount >= 100,
    progress: s => ({ current: Math.min(s.chatMessagesCount, 100), max: 100, unit: 'mensajes' }),
  },
  {
    id: 'newsletter',
    name: '¬°Suscrito!',
    description: 'Te suscribiste a la newsletter de Veredillas FM.',
    icon: 'üìß',
    rarity: 'common',
    category: 'social',
    points: 20,
    check: s => s.newsletterSubscribed,
  },

  // ‚îÄ‚îÄ‚îÄ COLECCI√ìN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  {
    id: 'primer_favorito',
    name: 'Guardado para Despu√©s',
    description: 'A√±ade tu primer episodio a favoritos.',
    icon: '‚≠ê',
    rarity: 'common',
    category: 'coleccion',
    points: 10,
    check: s => s.favoritesCount >= 1,
  },
  {
    id: 'diez_favoritos',
    name: 'Coleccionista',
    description: 'Ten 10 episodios en favoritos al mismo tiempo.',
    icon: 'üóÉÔ∏è',
    rarity: 'uncommon',
    category: 'coleccion',
    points: 50,
    check: s => s.favoritesCount >= 10,
    progress: s => ({ current: Math.min(s.favoritesCount, 10), max: 10, unit: 'favoritos' }),
  },
  {
    id: 'veinte_favoritos',
    name: 'Gran Colecci√≥n',
    description: 'Ten 20 episodios en favoritos.',
    icon: 'üèõÔ∏è',
    rarity: 'rare',
    category: 'coleccion',
    points: 90,
    check: s => s.favoritesCount >= 20,
    progress: s => ({ current: Math.min(s.favoritesCount, 20), max: 20, unit: 'favoritos' }),
  },
  {
    id: 'primer_clip',
    name: 'Clip Lover',
    description: 'Da Me Gusta a tu primer clip.',
    icon: 'üéûÔ∏è',
    rarity: 'common',
    category: 'coleccion',
    points: 10,
    check: s => s.likedClipsCount >= 1,
  },
  {
    id: 'diez_clips',
    name: 'Cin√©filo del Podcast',
    description: 'Da Me Gusta a 10 clips.',
    icon: 'üé¨',
    rarity: 'uncommon',
    category: 'coleccion',
    points: 45,
    check: s => s.likedClipsCount >= 10,
    progress: s => ({ current: Math.min(s.likedClipsCount, 10), max: 10, unit: 'clips' }),
  },

  // ‚îÄ‚îÄ‚îÄ EXPLORACI√ìN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  {
    id: 'perfil_completo',
    name: 'Cara y Cruz',
    description: 'Completa tu perfil con foto y biograf√≠a.',
    icon: 'ü™™',
    rarity: 'common',
    category: 'exploracion',
    points: 25,
    check: s => s.hasProfilePicture && s.hasBio,
  },
  {
    id: 'tres_secciones',
    name: 'Explorador Curioso',
    description: 'Visita al menos 3 secciones diferentes del sitio.',
    icon: 'üó∫Ô∏è',
    rarity: 'common',
    category: 'exploracion',
    points: 15,
    check: s => s.playbackHistoryCount >= 3,
  },

  // ‚îÄ‚îÄ‚îÄ MADRUGADOR / NOCT√ÅMBULO ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  {
    id: 'noctambulo',
    name: 'Noct√°mbulo',
    description: 'Escucha un episodio entre las 00:00 y las 04:00.',
    icon: 'üåô',
    rarity: 'uncommon',
    category: 'madrugador',
    points: 40,
    check: s => s.peakListeningHour >= 0 && s.peakListeningHour <= 4,
    secret: true,
  },
  {
    id: 'madrugador',
    name: 'Madrugador',
    description: 'Escucha un episodio entre las 05:00 y las 07:00.',
    icon: 'üåÖ',
    rarity: 'uncommon',
    category: 'madrugador',
    points: 35,
    check: s => s.peakListeningHour >= 5 && s.peakListeningHour <= 7,
    secret: true,
  },

  // ‚îÄ‚îÄ‚îÄ ESPECIAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  {
    id: 'konami',
    name: 'Jugador Retro',
    description: 'Descubriste el c√≥digo secreto Konami.',
    icon: 'üïπÔ∏è',
    rarity: 'rare',
    category: 'especial',
    points: 75,
    check: _s => false, // Unlocked manually via frontend event
    secret: true,
  },

  {
    id: 'estrella',
    name: 'Estrella del Podcast',
    description: 'Consigue 500 puntos de logros en total.',
    icon: '‚≠ê',
    rarity: 'epic',
    category: 'especial',
    points: 0, // meta-achievement, no extra points to avoid infinite loops
    check: s => s.totalPoints >= 500,
    progress: s => ({ current: Math.min(s.totalPoints, 500), max: 500, unit: 'pts' }),
  },
  {
    id: 'vip',
    name: 'VIP Veredillas',
    description: 'Alcanza el nivel m√°ximo y completa 30 episodios.',
    icon: 'üíú',
    rarity: 'legendary',
    category: 'especial',
    points: 500,
    check: s => s.listeningTime >= 18000 && s.completedEpisodesCount >= 30,
    secret: true,
  },
  {
    id: 'todo_favorito',
    name: 'Me Gusta Todo',
    description: 'Ten m√°s de 30 episodios en favoritos.',
    icon: 'üíù',
    rarity: 'epic',
    category: 'coleccion',
    points: 180,
    check: s => s.favoritesCount >= 30,
    progress: s => ({ current: Math.min(s.favoritesCount, 30), max: 30, unit: 'favoritos' }),
  },
  {
    id: 'sesenta_horas',
    name: 'Maestro del Podcast',
    description: 'Acumula 60 horas de escucha total.',
    icon: 'üéì',
    rarity: 'epic',
    category: 'escucha',
    points: 350,
    check: s => s.listeningTime >= 216000,
    progress: s => ({ current: Math.min(parseFloat((s.listeningTime / 3600).toFixed(1)), 60), max: 60, unit: 'h' }),
  },
  {
    id: 'fan_numero_uno',
    name: 'Fan N√∫mero 1',
    description: 'Consigue todos los logros de la categor√≠a Escucha.',
    icon: 'ü•á',
    rarity: 'legendary',
    category: 'especial',
    points: 700,
    check: _s => false, // Derived from other achievements
    secret: true,
  },
  {
    id: 'cuarenta_episodios',
    name: 'La Cuarentena',
    description: 'Completa 40 episodios al 100%.',
    icon: '4Ô∏è‚É£',
    rarity: 'epic',
    category: 'escucha',
    points: 220,
    check: s => s.completedEpisodesCount >= 40,
    progress: s => ({ current: Math.min(s.completedEpisodesCount, 40), max: 40, unit: 'episodios' }),
  },
  {
    id: 'doce_meses',
    name: 'A√±o de Veredillas',
    description: 'Lleva 365 d√≠as registrado. ¬°Feliz aniversario!',
    icon: 'üéä',
    rarity: 'legendary',
    category: 'fidelidad',
    points: 500,
    check: s => s.daysSinceJoin >= 365,
    secret: true,
  },

  // ‚îÄ‚îÄ‚îÄ NUEVOS LOGROS (ADICIONALES 50) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

  // ESCUCHA (CONTINUACI√ìN)
  {
    id: 'ciento_cincuenta_horas',
    name: 'Bibliotecario Auditivo',
    description: 'Acumula 150 horas de escucha total.',
    icon: 'üìö',
    rarity: 'legendary',
    category: 'escucha',
    points: 600,
    check: s => s.listeningTime >= 540000,
    progress: s => ({ current: Math.min(parseFloat((s.listeningTime / 3600).toFixed(1)), 150), max: 150, unit: 'h' }),
  },
  {
    id: 'doscientas_horas',
    name: 'Sabio de Veredillas',
    description: 'Acumula 200 horas de escucha total.',
    icon: 'üßò',
    rarity: 'legendary',
    category: 'escucha',
    points: 800,
    check: s => s.listeningTime >= 720000,
    progress: s => ({ current: Math.min(parseFloat((s.listeningTime / 3600).toFixed(1)), 200), max: 200, unit: 'h' }),
  },
  {
    id: 'setenta_y_cinco_episodios',
    name: 'Platino de Escucha',
    description: 'Completa 75 episodios al 100%.',
    icon: 'üíø',
    rarity: 'epic',
    category: 'escucha',
    points: 350,
    check: s => s.completedEpisodesCount >= 75,
    progress: s => ({ current: Math.min(s.completedEpisodesCount, 75), max: 75, unit: 'episodios' }),
  },
  {
    id: 'cien_episodios',
    name: 'Leyenda del Reproductor',
    description: 'Completa 100 episodios al 100%.',
    icon: 'üè∫',
    rarity: 'legendary',
    category: 'escucha',
    points: 1000,
    check: s => s.completedEpisodesCount >= 100,
    progress: s => ({ current: Math.min(s.completedEpisodesCount, 100), max: 100, unit: 'episodios' }),
  },
  {
    id: 'mil_minutos',
    name: 'Kilominuto',
    description: 'Escucha un total de 1,000 minutos.',
    icon: '‚åö',
    rarity: 'uncommon',
    category: 'escucha',
    points: 75,
    check: s => s.listeningTime >= 60000,
    progress: s => ({ current: Math.min(Math.floor(s.listeningTime / 60), 1000), max: 1000, unit: 'min' }),
  },

  // SOCIAL (CONTINUACI√ìN)
  {
    id: 'cien_comentarios',
    name: 'Voz Plateada',
    description: 'Publica 100 comentarios en la plataforma.',
    icon: 'ü•à',
    rarity: 'epic',
    category: 'social',
    points: 400,
    check: s => s.commentsCount >= 100,
    progress: s => ({ current: Math.min(s.commentsCount, 100), max: 100, unit: 'comentarios' }),
  },
  {
    id: 'doscientos_mensajes_chat',
    name: 'Chatter de √âlite',
    description: 'Supera los 200 mensajes en el chat en vivo.',
    icon: '‚ö°',
    rarity: 'rare',
    category: 'social',
    points: 180,
    check: s => s.chatMessagesCount >= 200,
    progress: s => ({ current: Math.min(s.chatMessagesCount, 200), max: 200, unit: 'mensajes' }),
  },
  {
    id: 'quinientos_mensajes_chat',
    name: 'Se√±or del Chat',
    description: 'Env√≠a 500 mensajes en el chat. ¬°No hay quien te calle!',
    icon: 'üì¢',
    rarity: 'epic',
    category: 'social',
    points: 350,
    check: s => s.chatMessagesCount >= 500,
    progress: s => ({ current: Math.min(s.chatMessagesCount, 500), max: 500, unit: 'mensajes' }),
  },
  {
    id: 'mil_mensajes_chat',
    name: 'Bot Humano',
    description: 'Alcanza la cifra legendaria de 1,000 mensajes en el chat.',
    icon: 'ü§ñ',
    rarity: 'legendary',
    category: 'social',
    points: 750,
    check: s => s.chatMessagesCount >= 1000,
    progress: s => ({ current: Math.min(s.chatMessagesCount, 1000), max: 1000, unit: 'mensajes' }),
    secret: true,
  },
  {
    id: 'cincuenta_clips',
    name: 'Maestro del Clip',
    description: 'Da Me Gusta a 50 clips diferentes.',
    icon: 'üé¨',
    rarity: 'rare',
    category: 'coleccion',
    points: 200,
    check: s => s.likedClipsCount >= 50,
    progress: s => ({ current: Math.min(s.likedClipsCount, 50), max: 50, unit: 'clips' }),
  },
  {
    id: 'social_butterfly',
    name: 'Mariposa Social',
    description: 'Comenta, chatea, suscr√≠bete a la newsletter y dale a like a un clip.',
    icon: 'ü¶ã',
    rarity: 'rare',
    category: 'social',
    points: 150,
    check: s => s.commentsCount >= 1 && s.chatMessagesCount >= 1 && s.newsletterSubscribed && s.likedClipsCount >= 1,
    secret: true,
  },

  // FIDELIDAD (CONTINUACI√ìN)
  {
    id: 'dos_anos',
    name: 'Veterano de Veredillas',
    description: 'Lleva 2 a√±os (730 d√≠as) siendo parte de la comunidad.',
    icon: 'üéñÔ∏è',
    rarity: 'legendary',
    category: 'fidelidad',
    points: 800,
    check: s => s.daysSinceJoin >= 730,
    progress: s => ({ current: Math.min(s.daysSinceJoin, 730), max: 730, unit: 'd√≠as' }),
  },
  {
    id: 'racha_cien',
    name: 'Fuego Eterno',
    description: 'Mant√©n una racha de conexi√≥n de 100 d√≠as.',
    icon: 'üî•',
    rarity: 'legendary',
    category: 'fidelidad',
    points: 1500,
    check: s => s.loginStreakDays >= 100,
    progress: s => ({ current: Math.min(s.loginStreakDays, 100), max: 100, unit: 'd√≠as' }),
  },
  {
    id: 'regreso_triunfal',
    name: 'Regreso Triunfal',
    description: 'Vuelve a conectar despu√©s de tener una racha m√°xima de al menos 10 d√≠as.',
    icon: '‚ôªÔ∏è',
    rarity: 'uncommon',
    category: 'fidelidad',
    points: 50,
    check: s => s.maxStreakDays >= 10 && s.loginStreakDays === 1,
    secret: true,
  },

  // COLECCIONISTA (NUEVA CATEGOR√çA)
  {
    id: 'primer_cromo',
    name: '¬°Tengo uno!',
    description: 'Desbloquea tu primer cromo de invitado.',
    icon: 'üÉè',
    rarity: 'common',
    category: 'coleccionista',
    points: 20,
    check: s => s.unlockedCardsCount >= 1,
  },
  {
    id: 'cinco_cromos',
    name: 'Fan de los Invitados',
    description: 'Colecciona 5 cromos de invitados diferentes.',
    icon: '‚úã',
    rarity: 'uncommon',
    category: 'coleccionista',
    points: 80,
    check: s => s.unlockedCardsCount >= 5,
    progress: s => ({ current: Math.min(s.unlockedCardsCount, 5), max: 5, unit: 'cromos' }),
  },
  {
    id: 'diez_cromos',
    name: 'Caza Talentos',
    description: 'Colecciona 10 cromos de invitados.',
    icon: 'üéØ',
    rarity: 'rare',
    category: 'coleccionista',
    points: 150,
    check: s => s.unlockedCardsCount >= 10,
    progress: s => ({ current: Math.min(s.unlockedCardsCount, 10), max: 10, unit: 'cromos' }),
  },
  {
    id: 'veinte_cromos',
    name: 'Museo de Voces',
    description: 'Colecciona 20 cromos de invitados.',
    icon: 'üèõÔ∏è',
    rarity: 'epic',
    category: 'coleccionista',
    points: 300,
    check: s => s.unlockedCardsCount >= 20,
    progress: s => ({ current: Math.min(s.unlockedCardsCount, 20), max: 20, unit: 'cromos' }),
  },
  {
    id: 'coleccionista_plata',
    name: 'Coleccionista de Plata',
    description: 'Desbloquea el 50% de todos los cromos disponibles.',
    icon: 'ü•à',
    rarity: 'epic',
    category: 'coleccionista',
    points: 400,
    check: s => (s.unlockedCardsCount / s.totalCardsCount) >= 0.5 && s.totalCardsCount > 0,
    progress: s => ({ current: s.unlockedCardsCount, max: Math.ceil(s.totalCardsCount / 2), unit: 'cromos' }),
  },
  {
    id: 'album_completo',
    name: 'Completista Magn√≠fico',
    description: 'Consigue todos los cromos del √°lbum.',
    icon: 'üëë',
    rarity: 'legendary',
    category: 'coleccionista',
    points: 1000,
    check: s => s.unlockedCardsCount >= s.totalCardsCount && s.totalCardsCount > 0,
    progress: s => ({ current: s.unlockedCardsCount, max: s.totalCardsCount, unit: 'cromos' }),
  },

  // MARATON (NUEVA CATEGOR√çA)
  {
    id: 'maraton_diez',
    name: 'Marat√≥n Semanal',
    description: 'Escucha 10 episodios en una sola semana.',
    icon: 'üèÉ',
    rarity: 'rare',
    category: 'maraton',
    points: 120,
    check: s => s.episodesListenedThisWeek >= 10,
    progress: s => ({ current: Math.min(s.episodesListenedThisWeek, 10), max: 10, unit: 'episodios' }),
  },
  {
    id: 'maraton_veinte',
    name: 'Siete D√≠as sin Sue√±o',
    description: 'Escucha 20 episodios en una sola semana.',
    icon: 'üåÄ',
    rarity: 'epic',
    category: 'maraton',
    points: 300,
    check: s => s.episodesListenedThisWeek >= 20,
    progress: s => ({ current: Math.min(s.episodesListenedThisWeek, 20), max: 20, unit: 'episodios' }),
  },
  {
    id: 'maraton_cincuenta',
    name: 'El Corredor de Fondo',
    description: 'Escucha 50 episodios en una sola semana.',
    icon: 'üèÅ',
    rarity: 'legendary',
    category: 'maraton',
    points: 800,
    check: s => s.episodesListenedThisWeek >= 50,
    progress: s => ({ current: Math.min(s.episodesListenedThisWeek, 50), max: 50, unit: 'episodios' }),
    secret: true,
  },

  // EXPLORACI√ìN (CONTINUACI√ìN)

  {
    id: 'diez_secciones',
    name: 'Turista Digital',
    description: 'Has explorado profundamente el sitio (10+ episodios diferentes).',
    icon: 'üß≠',
    rarity: 'rare',
    category: 'exploracion',
    points: 100,
    check: s => s.playbackHistoryCount >= 10,
  },
  {
    id: 'variedad_invitados',
    name: 'O√≠do Abierto',
    description: 'Escucha entrevistas de 10 invitados diferentes.',
    icon: 'üé≠',
    rarity: 'rare',
    category: 'exploracion',
    points: 150,
    check: s => s.differentGuestsListenedCount >= 10,
    progress: s => ({ current: Math.min(s.differentGuestsListenedCount, 10), max: 10, unit: 'invitados' }),
  },

  // ESPECIAL (CONTINUACI√ìN)
  {
    id: 'punto_mil',
    name: 'Millonario de Puntos',
    description: 'Consigue 1,000 puntos de logros.',
    icon: 'üí∞',
    rarity: 'rare',
    category: 'especial',
    points: 100,
    check: s => s.totalPoints >= 1000,
    progress: s => ({ current: Math.min(s.totalPoints, 1000), max: 1000, unit: 'pts' }),
  },
  {
    id: 'punto_dosmil',
    name: 'Doble Millonario',
    description: 'Consigue 2,000 puntos de logros.',
    icon: 'üíé',
    rarity: 'epic',
    category: 'especial',
    points: 200,
    check: s => s.totalPoints >= 2000,
    progress: s => ({ current: Math.min(s.totalPoints, 2000), max: 2000, unit: 'pts' }),
  },
  {
    id: 'punto_cincomil',
    name: 'Deidad del Ranking',
    description: 'Consigue 5,000 puntos de logros. ¬øC√≥mo es posible?',
    icon: 'üéá',
    rarity: 'legendary',
    category: 'especial',
    points: 500,
    check: s => s.totalPoints >= 5000,
    progress: s => ({ current: Math.min(s.totalPoints, 5000), max: 5000, unit: 'pts' }),
    secret: true,
  },
  {
    id: 'completista_comun',
    name: 'Base S√≥lida',
    description: 'Consigue todos los logros de rareza Com√∫n.',
    icon: 'üß±',
    rarity: 'rare',
    category: 'especial',
    points: 200,
    check: _s => false, // Meta
    secret: true,
  },
  {
    id: 'maestro_del_konami_pro',
    name: 'Dedo Veloz',
    description: 'Descubriste el C√≥digo Konami y has enviado 100 mensajes.',
    icon: '‚å®Ô∏è',
    rarity: 'epic',
    category: 'especial',
    points: 250,
    check: s => s.chatMessagesCount >= 100, // Partial logic, meta check elsewhere
    secret: true,
  },

  // M√ÅS LOGROS PARA LLEGAR A 50
  {
    id: 'fan_madrugada',
    name: 'Vampiro del Podcast',
    description: 'Tu hora pico de escucha es entre las 3 AM y las 4 AM.',
    icon: 'üßõ',
    rarity: 'rare',
    category: 'madrugador',
    points: 100,
    check: s => s.peakListeningHour >= 3 && s.peakListeningHour <= 4,
    secret: true,
  },
  {
    id: 'fan_amanecer',
    name: 'Canto del Gallo',
    description: 'Tu hora pico de escucha es exactamente a las 5 AM.',
    icon: 'üêì',
    rarity: 'rare',
    category: 'madrugador',
    points: 120,
    check: s => s.peakListeningHour === 5,
    secret: true,
  },
  {
    id: 'coleccionista_bronce_meta',
    name: 'Aprendiz de Museo',
    description: 'Desbloquea el 25% de los cromos.',
    icon: 'ü•â',
    rarity: 'uncommon',
    category: 'coleccionista',
    points: 100,
    check: s => (s.unlockedCardsCount / s.totalCardsCount) >= 0.25 && s.totalCardsCount > 0,
  },
  {
    id: 'favoritos_cincuenta',
    name: 'Curador de Arte',
    description: 'A√±ade 50 episodios a tus favoritos.',
    icon: 'üñºÔ∏è',
    rarity: 'epic',
    category: 'coleccion',
    points: 300,
    check: s => s.favoritesCount >= 50,
    progress: s => ({ current: Math.min(s.favoritesCount, 50), max: 50, unit: 'favoritos' }),
  },
  {
    id: 'mega_fan_cien',
    name: 'Archivo Viviente',
    description: 'A√±ade 100 episodios a tus favoritos.',
    icon: '‚õ©Ô∏è',
    rarity: 'legendary',
    category: 'coleccion',
    points: 600,
    check: s => s.favoritesCount >= 100,
    progress: s => ({ current: Math.min(s.favoritesCount, 100), max: 100, unit: 'favoritos' }),
  },
  {
    id: 'escucha_aniversario',
    name: 'Un a√±o escuchando',
    description: 'Has completado al menos 50 episodios y llevas un a√±o registrado.',
    icon: 'üéâ',
    rarity: 'epic',
    category: 'fidelidad',
    points: 450,
    check: s => s.completedEpisodesCount >= 50 && s.daysSinceJoin >= 365,
    secret: true,
  },
  {
    id: 'social_king',
    name: 'Rey de la Comunidad',
    description: 'Suma 50 comentarios y 500 mensajes de chat.',
    icon: 'üëë',
    rarity: 'epic',
    category: 'social',
    points: 500,
    check: s => s.commentsCount >= 50 && s.chatMessagesCount >= 500,
  },
  {
    id: 'explorador_total',
    name: 'Conozco cada rinc√≥n',
    description: 'Completa tu perfil, suscr√≠bete y escucha 20 episodios.',
    icon: 'üõ∞Ô∏è',
    rarity: 'rare',
    category: 'exploracion',
    points: 200,
    check: s => s.hasProfilePicture && s.hasBio && s.newsletterSubscribed && s.playbackHistoryCount >= 20,
  },
  {
    id: 'maraton_extrema_cien',
    name: 'No tengo vida social',
    description: 'Escucha 100 episodios en una sola semana.',
    icon: 'üíÄ',
    rarity: 'legendary',
    category: 'maraton',
    points: 2000,
    check: s => s.episodesListenedThisWeek >= 100,
    secret: true,
  },
  {
    id: 'lealtad_quinientos',
    name: 'Lealtad Inquebrantable',
    description: 'Lleva 500 d√≠as en Veredillas FM.',
    icon: 'üíç',
    rarity: 'legendary',
    category: 'fidelidad',
    points: 1200,
    check: s => s.daysSinceJoin >= 500,
    progress: s => ({ current: Math.min(s.daysSinceJoin, 500), max: 500, unit: 'd√≠as' }),
  },
  {
    id: 'influenciador_junior',
    name: 'Influenciador Junior',
    description: 'Consigue que tus comentarios y likes en clips sumen 50 interacciones.',
    icon: 'ü§≥',
    rarity: 'uncommon',
    category: 'social',
    points: 100,
    check: s => (s.commentsCount + s.likedClipsCount) >= 50,
  },
  {
    id: 'fan_seasons_all',
    name: 'Cronista de Temporadas',
    description: 'Escucha al menos un episodio de cada temporada disponible.',
    icon: 'üìÇ',
    rarity: 'rare',
    category: 'escucha',
    points: 200,
    check: s => s.playbackHistoryCount >= s.totalSeasonsCount && s.totalSeasonsCount > 1,
  },
  {
    id: 'perfeccionista_v2',
    name: 'Perfeccionista Supremo',
    description: 'Completa 200 episodios al 100%.',
    icon: 'üî•',
    rarity: 'legendary',
    category: 'escucha',
    points: 2500,
    check: s => s.completedEpisodesCount >= 200,
    progress: s => ({ current: Math.min(s.completedEpisodesCount, 200), max: 200, unit: 'episodios' }),
  },
  {
    id: 'punto_diezmil',
    name: 'Leyenda Viviente de VFM',
    description: 'Alcanza los 10,000 puntos de logros.',
    icon: 'üåå',
    rarity: 'legendary',
    category: 'especial',
    points: 1000,
    check: s => s.totalPoints >= 10000,
    secret: true,
  },
  {
    id: 'oyente_nocturno_leyenda',
    name: 'Pesadilla en Veredillas',
    description: 'Escucha 50 episodios en horario nocturno (00-04h).',
    icon: 'üëª',
    rarity: 'epic',
    category: 'madrugador',
    points: 400,
    check: s => s.peakListeningHour >= 0 && s.peakListeningHour <= 4 && s.completedEpisodesCount >= 50,
    secret: true,
  },
  {
    id: 'primer_paso_cromo',
    name: 'Iniciando el √Ålbum',
    description: 'Completa tu primer cromo de la Temporada 1.',
    icon: 'üéüÔ∏è',
    rarity: 'common',
    category: 'coleccionista',
    points: 30,
    check: s => s.unlockedCardsCount >= 1,
  },
  {
    id: 'maestro_de_la_voz',
    name: 'Sabio de la Escucha',
    description: 'Acumula 300 horas de escucha.',
    icon: 'üß†',
    rarity: 'legendary',
    category: 'escucha',
    points: 1500,
    check: s => s.listeningTime >= 1080000,
    progress: s => ({ current: Math.min(parseFloat((s.listeningTime / 3600).toFixed(1)), 300), max: 300, unit: 'h' }),
  },
  {
    id: 'el_elegido',
    name: 'El Elegido',
    description: 'Consigue el logro VIP y adem√°s ten 500 mensajes de chat.',
    icon: '‚ú®',
    rarity: 'legendary',
    category: 'especial',
    points: 1000,
    check: s => s.listeningTime >= 18000 && s.completedEpisodesCount >= 30 && s.chatMessagesCount >= 500,
    secret: true,
  },
];

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// HELPER UTILITIES
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

/** Returns all achievements that the stats qualify for. */
export function computeUnlockedAchievements(stats: AchievementStats): string[] {
  return ACHIEVEMENTS.filter(a => a.check(stats)).map(a => a.id);
}

/** Get a single achievement definition by id. */
export function getAchievementById(id: string): Achievement | undefined {
  return ACHIEVEMENTS.find(a => a.id === id);
}

/** Sort achievements by rarity weight for display. */
export const RARITY_ORDER: Record<Achievement['rarity'], number> = {
  legendary: 0,
  epic:      1,
  rare:      2,
  uncommon:  3,
  common:    4,
};

export function sortByRarity(list: Achievement[]): Achievement[] {
  return [...list].sort((a, b) => RARITY_ORDER[a.rarity] - RARITY_ORDER[b.rarity]);
}
